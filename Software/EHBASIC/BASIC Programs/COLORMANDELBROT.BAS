NEW
5 REM http://www.rosettacode.org/wiki/Mandelbrot_set#BASIC
6 POKE $8080FFFF,$00
10 X1=159:Y1=199
20 I1=-1.0:I2=1.0:R1=-2.0:R2=1.0
30 S1=(R2-R1)/X1:S2=(I2-I1)/Y1
40 FOR Y=0 TO Y1 STEP 2
50 I3=I1+S2*Y
60 FOR X=0 TO X1
70 R3=R1+S1*X:Z1=R3:Z2=I3
80 FOR N=0 TO 15
90 A=Z1*Z1:B=Z2*Z2
100 IF A+B>4.0 THEN GOTO 130
110 Z2=2*Z1*Z2+I3
111 Z1=A-B+R3
120 NEXT N
130 GOSUB 200
140 NEXT X
160 NEXT Y
170 END

200 Q=$00
201 IF N=1 THEN Q=$11
202 IF N=2 THEN Q=$22
203 IF N=3 THEN Q=$33
204 IF N=4 THEN Q=$44
205 IF N=5 THEN Q=$55
206 IF N=6 THEN Q=$66
207 IF N=7 THEN Q=$77
208 IF N=8 THEN Q=$88
209 IF N=9 THEN Q=$99
210 IF N=10 THEN Q=$AA
211 IF N=11 THEN Q=$BB
212 IF N=12 THEN Q=$CC
213 IF N=13 THEN Q=$DD
214 IF N=14 THEN Q=$EE
215 IF N=15 THEN Q=$FF
220 YP=(160*Y)
221 XP=X
222 OFS=YP+XP
230 LOKE $00000FFC,$80800000
231 DOKE $00000FFE,OFS
340 POKE (LEEK($00000FFC)),Q
341 POKE (LEEK($00000FFC)),Q
350 OFS=OFS+160
351 DOKE $00000FFE,OFS
360 POKE (LEEK($00000FFC)),Q
361 POKE (LEEK($00000FFC)),Q

370 RETURN
